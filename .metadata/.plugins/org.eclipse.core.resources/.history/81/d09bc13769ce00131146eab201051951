
import android.app.Activity;
import android.location.Location;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

import com.detroitteatime.locationgoogleplay.R;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesClient;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.location.LocationClient;

public class Main extends Activity implements
		GooglePlayServicesClient.ConnectionCallbacks,
		GooglePlayServicesClient.OnConnectionFailedListener {

	static final int REQUEST_CODE_RECOVER_PLAY_SERVICES = 1001;
	private LocationClient mLocationClient;
	private TextView latView;
	private TextView longView;

	@Override
	protected void onCreate(Bundle savedInstanceState) {

		/*
		 * Create a new location client, using the enclosing class to handle
		 * callbacks.
		 */
		mLocationClient = new LocationClient(this, this, this);
		
		latView = (TextView)findViewById(R.id.latitudeView);
		longView = (TextView)findViewById(R.id.longitudeView);

	}

	@Override
	protected void onStart() {
		super.onStart();
		mLocationClient.connect();
	}


	@Override
	protected void onResume() {
		super.onResume();
		int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
		if (status != ConnectionResult.SUCCESS) {
			Toast.makeText(this, "Install Google Play Services.",
					Toast.LENGTH_SHORT).show();
			finish();
		}else{
			Location mCurrentLocation = mLocationClient.getLastLocation();
			String latText = "Latitude: " + String.valueOf(mCurrentLocation.getLatitude());
			String longText = "Longitude: " + String.valueOf(mCurrentLocation.getLatitude());
			String provider = "provider: " +String.valueOf(mCurrentLocation.getProvider());
			String accuracy = "accuracy: " + String.valueOf(mCurrentLocation.getAccuracy());
			String age = "Time aquired: " + String.valueOf(mCurrentLocation.getTime());
			
			latView.setText(latText);
			longView.setText(longText);
			
		}
	}

	@Override
	protected void onStop() {
		// Disconnecting the client invalidates it.
		mLocationClient.disconnect();
		super.onStop();
	}

	

	// Methods to implement GooglePlaySercicesClient.ConnectionCallbacks
	@Override
	public void onConnected(Bundle connectionHint) {

	}

	@Override
	public void onDisconnected() {

	}

	// Methods to implement GooglePlaySercicesClient.OnConnectionFailedListener
	@Override
	public void onConnectionFailed(ConnectionResult result) {

	}

	//

}
